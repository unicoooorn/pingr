prometheus:
  url: "http://prometheus:9090"
  timeout: 2s

backends:
  sum_service1:
    type: http
    url: "http://sum_service1:8081/health"
    timeout: 2s
    metrics_queries:
      - "rate(get_value_duration_seconds_sum[5m]) / rate(get_value_duration_seconds_count[5m])"
      - "increase(get_value_requests_total[5m])"
      - "app_cpu_usage_percent"
      - "app_mem_usage_percent"
      - "max_over_time(app_mem_usage_percent[5m])"
      - "avg_over_time(app_mem_usage_percent[5m])"

  sum_service2:
    type: http
    url: "http://sum_service2:8082/health"
    timeout: 2s
    metrics_queries:
      - "rate(get_value_duration_seconds_sum[5m]) / rate(get_value_duration_seconds_count[5m])"
      - "increase(get_value_requests_total[5m])"
      - "app_cpu_usage_percent"
      - "app_mem_usage_percent"
      - "max_over_time(app_mem_usage_percent[5m])"
      - "avg_over_time(app_mem_usage_percent[5m])"

  sum_aggregator:
    type: http
    url: "http://sum_aggregator:8080/health"
    timeout: 2s
    metrics_queries:
      - "rate(get_value_duration_seconds_sum[5m]) / rate(get_value_duration_seconds_count[5m])"
      - "increase(get_value_requests_total[5m])"
      - "app_cpu_usage_percent"
      - "app_mem_usage_percent"
      - "max_over_time(app_mem_usage_percent[5m])"
      - "avg_over_time(app_mem_usage_percent[5m])"
  
  spammer:
    type: tcp
    host: spammer
    port: 7777
    timeout: 2s